# config.yaml
# Índice da GPU a ser utilizada
gpu_index: 0

# Tamanho do lote de processamento de detecções para CPU e GPU
cpu_batch_size: 4
gpu_batch_size: 32

# Limite de frames sem detecção para considerar o objeto perdido
max_frames_lost: 30

# Limite máximo de frames por track
max_frames_por_track: 900

# Modelo de detecção facial
face_detection_model: "yolov12n-face.pt" # "yolov8n-face.pt"

# Modelo de rastreamento
# Opções:
## bytetrack.yaml <- mais rápido
## deep_sort.yaml <- mais preciso
tracker: "bytetrack.yaml"  

# Confiança mínima para considerar uma detecção válida
conf: 0.1  # Valor padrão: 0.1 igual o do algoritmo ByteTrack
iou: 0.2 # Mais permissivo, mantêm o track por mais tempo

# Exibir na tela
show: false

# Pesos na escolha da melhor face do track
qualidade_face:
  confianca_deteccao: 3
  tamanho_bbox: 4
  face_frontal: 6
  proporcao_bbox: 1
  nitidez: 1

# Modo verboso de log
verbose_log: false

# Configurações de salvamento de imagens
salvamento_imagens:
  # Ativa/desativa o salvamento de imagens no disco
  habilitado: false
  # Diretório de saída para as imagens
  project: "./imagens/"
  name: "rtsp_byte_track_results"

# Detecção de movimento no track
movimento:
  # Limiar mínimo de variação em pixels para considerar movimento
  # Calcula-se a distância euclidiana entre centros dos bboxes consecutivos
  limiar_minimo_pixels: 0.7  # 1 pixel
  # Percentual mínimo de frames com movimento (0.0 a 1.0)
  # Se menos que esse percentual tiver movimento, considera sem movimento
  percentual_minimo_frames: 0.1  # 10% dos frames

# Validação do track
validacao:
  # Confiança mínima do melhor evento para considerar track válido
  # Apenas tracks válidos são enviados ao FindFace
  confianca_minima: 0.43

# Prefixo dos grupos de câmeras no FindFace
prefixo_grupo_camera_findface: "TESTE"

# Otimizações de performance para cenas com muitas faces
performance:
  # Resolução de inferência (640, 1280). Menor = mais rápido
  inference_size: 640
  # Processa detecções a cada N frames (1 = todos os frames)
  detection_skip_frames: 1
  # Máximo de workers para processamento paralelo (0 = automático)
  max_parallel_workers: 0
  # Ativa processamento assíncrono de frames
  async_inference: true
  # Tamanho da fila de frames para processamento assíncrono
  async_queue_size: 32  # ajuste para o tamanho lote de processamento de frames (batch size)
  # Ativa batch processing de qualidade facial
  batch_quality_calculation: true

# Configurações TensorRT (melhor performance em GPUs NVIDIA)
tensorrt:
  # Habilita o uso de TensorRT se disponível (requer CUDA)
  # TensorRT tem precedência sobre OpenVINO quando GPU CUDA está disponível
  enabled: false
  # Precisão: FP16 (recomendado), FP32, INT8
  precision: "FP16"
  # Workspace em GB para otimizações TensorRT (padrão: 4GB)
  workspace: 4

# Configurações OpenVINO
openvino:
  # Habilita o uso de OpenVINO se disponível
  enabled: false
  # Dispositivo OpenVINO: AUTO (seleção automática), CPU, GPU, NPU
  device: "AUTO"
  # Precisão: FP16 (recomendado), FP32, INT8
  precision: "FP16"

